﻿{% extends "base.html" %}

{% block title %}Settings - AAFS AI{% endblock %}



{% block extra_css %}

<style>

    .settings-container {

        max-width: 800px;

        margin: 0 auto;

        padding: 20px;

    }



    .settings-title {

        margin-bottom: 25px;

        color: var(--text-main);

        font-weight: 800;

    }



    .glass-card {

        margin-bottom: 20px;

        padding: 25px;

    }



    /* Collapsible Password Section */

    .password-header {

        display: flex;

        justify-content: space-between;

        align-items: center;

        cursor: pointer;

    }



    .password-content {

        max-height: 0;

        overflow: hidden;

        transition: max-height 0.3s ease-out, margin-top 0.3s;

    }



    .password-content.show {

        max-height: 500px; /* Adjust based on content height */

        margin-top: 20px;

    }



    .toggle-icon {

        transition: transform 0.3s;

        font-size: 0.8rem;

        color: var(--accent);

    }



    .rotate {

        transform: rotate(180deg);

    }



    /* AI Card Styling */

    .ai-card {

        border: 1px solid var(--accent) !important;

        position: relative;

    }



    .ai-badge {

        position: absolute;

        top: -12px;

        right: 20px;

        background: var(--accent);

        color: white;

        padding: 2px 12px;

        border-radius: 20px;

        font-size: 0.75rem;

        font-weight: 700;

    }



    /* Form Elements */

    .form-group {

        margin-bottom: 15px;

    }



    .form-label {

        display: block;

        font-size: 0.85rem;

        margin-bottom: 5px;

        color: var(--text-secondary);

    }



    .custom-input, .custom-select {

        width: 100%;

        padding: 10px;

        border-radius: 8px;

        border: 1px solid var(--border-color);

        background: var(--bg-primary);

        color: var(--text-main);

    }



    .submit-btn {

        width: 100%;

        margin-top: 10px;

    }

</style>

{% endblock %}



{% block content %}

<div class="settings-container">

    <h2 class="settings-title">Settings</h2>



    <div class="glass-card">

        <h3>Account Information</h3>

        <p class="form-label" style="margin-top: 10px;">Username: <strong>{{ user.username }}</strong></p>

        <p class="form-label">Email: <strong>{{ user.email }}</strong></p>

    </div>



    <div class="glass-card">

        <div class="password-header" onclick="togglePassword()">

            <h3 style="margin: 0;">🔐 Change Password</h3>

            <span id="pass-icon" class="toggle-icon">▼</span>

        </div>

       

        <div id="password-section" class="password-content">

            <form action="/change_password" method="POST">

                <div class="form-group">

                    <label class="form-label">Current Password</label>

                    <input type="password" name="current_password" class="custom-input" required>

                </div>

                <div class="form-group">

                    <label class="form-label">New Password</label>

                    <input type="password" name="new_password" class="custom-input" required>

                </div>

                <div class="form-group">

                    <label class="form-label">Confirm New Password</label>

                    <input type="password" name="confirm_password" class="custom-input" required>

                </div>

                <button type="submit" class="btn-primary submit-btn">Confirm Password Change</button>

            </form>

        </div>

    </div>



  <div class="glass-card ai-card">

        <span class="ai-badge">AI ENHANCED</span>

       

        <h3 class="form-group">

            🤖 AI Learning Preferences

        </h3>



        <form action="/update_ai_settings" method="POST">

            <div class="form-group">

                <label class="form-label">AI Feedback Tone</label>

                <select name="ai_tone" class="custom-select">

                    <option value="supportive">Supportive (Focus on motivation)</option>

                    <option value="strict">Strict (Professional & Detailed correction)</option>

                    <option value="balanced" selected>Balanced (Constructive & Clear)</option>

                </select>

                <span class="helper-text">Determines how the AI crititques your writing and speaking.</span>

            </div>



            <div class="form-group">

                <label class="form-label">AI Speaking Speed (Voice Mode)</label>

                <div class="speed-grid">

                    <div class="speed-option">

                        <input type="radio" id="slow" name="ai_speed" value="0.8">

                        <label for="slow" class="speed-label">Slow</label>

                    </div>

                    <div class="speed-option">

                        <input type="radio" id="normal" name="ai_speed" value="1.0" checked>

                        <label for="normal" class="speed-label">Normal</label>

                    </div>

                    <div class="speed-option">

                        <input type="radio" id="fast" name="ai_speed" value="1.2">

                        <label for="fast" class="speed-label">Fast</label>

                    </div>

                </div>

            </div>



            <div class="form-group">

                <label class="checkbox-group">

                    <input type="checkbox" name="weekly_report" class="custom-checkbox" checked>

                    <span>Send me weekly AI progress reports via email.</span>

                </label>

            </div>



            <button type="submit" class="btn-primary submit-btn">

                Save AI Preferences

            </button>

        </form>

    </div>

</div>

{% endblock %}



{% block extra_js %}

<script>

    function togglePassword() {

        const content = document.getElementById('password-section');

        const icon = document.getElementById('pass-icon');

       

        content.classList.toggle('show');

        icon.classList.toggle('rotate');

    }

</script>

{% endblock %}