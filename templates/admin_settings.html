{% extends "base.html" %}

{% block title %}Platform Settings - AAFS AI{% endblock %}

{% block extra_css %}
<style>
    .page-header {
        margin-bottom: 24px;
    }

    .page-header h1 {
        margin: 0;
        font-size: 1.75rem;
        font-weight: 700;
    }

    .form-container {
        max-width: 800px;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 32px;
        margin: 0 auto 24px auto;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--text-main);
        font-size: 0.875rem;
    }

    input, select, textarea {
        width: 100%;
        padding: 10px 12px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        background: var(--card-bg);
        color: var(--text-main);
        font-size: 0.875rem;
        box-sizing: border-box;
        font-family: inherit;
    }

    textarea {
        min-height: 80px;
        resize: vertical;
    }

    .settings-list {
        max-width: 800px;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        overflow: hidden;
        margin: 24px auto 0 auto;
    }

    .setting-item {
        padding: 16px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .setting-item:last-child {
        border-bottom: none;
    }

    .setting-info {
        flex: 1;
    }

    .setting-key {
        font-weight: 600;
        color: var(--text-main);
        margin-bottom: 4px;
    }

    .setting-value {
        font-size: 0.875rem;
        color: var(--text-secondary);
    }

    .setting-description {
        font-size: 0.75rem;
        color: var(--text-secondary);
        margin-top: 4px;
    }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Platform Settings</h1>
</div>

<div class="form-container">
    <h2 style="margin: 0 0 20px 0; font-size: 1.25rem;">Add/Update Setting</h2>
    <form method="POST" action="/admin/settings/update">
        <div class="form-group">
            <label for="setting_key">Setting Key</label>
            <input type="text" id="setting_key" name="setting_key" required placeholder="e.g., max_file_size, maintenance_mode">
        </div>

        <div class="form-group">
            <label for="setting_value">Setting Value</label>
            <input type="text" id="setting_value" name="setting_value" placeholder="Enter the value">
        </div>

        <div class="form-group">
            <label for="setting_type">Setting Type</label>
            <select id="setting_type" name="setting_type" required>
                <option value="string">String</option>
                <option value="integer">Integer</option>
                <option value="boolean">Boolean</option>
                <option value="json">JSON</option>
            </select>
        </div>

        <div class="form-group">
            <label for="description">Description (Optional)</label>
            <textarea id="description" name="description" placeholder="Describe what this setting does"></textarea>
        </div>

        <button type="submit" class="btn-primary">Save Setting</button>
    </form>
</div>

<div class="settings-list">
    <div style="padding: 16px; border-bottom: 1px solid var(--border-color); background: var(--sidebar-bg);">
        <h2 style="margin: 0; font-size: 1.25rem;">Current Settings</h2>
    </div>
    {% for setting in settings %}
    <div class="setting-item">
        <div class="setting-info">
            <div class="setting-key">{{ setting.setting_key }}</div>
            <div class="setting-value">{{ setting.setting_value }}</div>
            {% if setting.description %}
            <div class="setting-description">{{ setting.description }}</div>
            {% endif %}
            <div class="setting-description">Type: {{ setting.setting_type }} | Updated: {{ setting.updated_at.strftime('%Y-%m-%d %H:%M') }}</div>
        </div>
    </div>
    {% endfor %}
    {% if not settings %}
    <div class="setting-item">
        <div class="setting-info">
            <div class="setting-value">No settings configured yet.</div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
